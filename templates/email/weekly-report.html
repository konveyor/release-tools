<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konveyor Weekly Repository Health Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f6f8fa;
        }
        .container {
            background-color: #ffffff;
            border-radius: 6px;
            padding: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
        }
        .header {
            text-align: center;
            border-bottom: 3px solid #0366d6;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0;
            color: #0366d6;
            font-size: 24px;
        }
        .header p {
            margin: 5px 0 0;
            color: #586069;
            font-size: 14px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f6f8fa;
            border-radius: 6px;
            border-left: 4px solid #0366d6;
        }
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 0 0 15px;
            color: #24292e;
        }
        .repo-title {
            font-size: 18px;
            font-weight: 600;
            margin: 20px 0 10px;
            color: #0366d6;
        }
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .metric {
            background-color: #ffffff;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
        }
        .metric-label {
            font-size: 12px;
            color: #586069;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .metric-value {
            font-size: 24px;
            font-weight: 600;
            color: #24292e;
            margin: 5px 0;
        }
        .metric-trend {
            font-size: 14px;
            margin-top: 5px;
        }
        .trend-up {
            color: #d73a49;
        }
        .trend-down {
            color: #28a745;
        }
        .trend-same {
            color: #6a737d;
        }
        .stale-list {
            margin-top: 10px;
        }
        .stale-item {
            padding: 10px;
            background-color: #ffffff;
            border-left: 3px solid #f66a0a;
            margin-bottom: 8px;
            border-radius: 3px;
        }
        .stale-item-title {
            font-weight: 600;
            color: #24292e;
        }
        .stale-item-meta {
            font-size: 12px;
            color: #586069;
            margin-top: 4px;
        }
        .contributors-list {
            margin-top: 10px;
        }
        .contributor {
            display: inline-block;
            background-color: #ffffff;
            padding: 8px 12px;
            margin: 4px;
            border-radius: 16px;
            border: 1px solid #e1e4e8;
            font-size: 14px;
        }
        .vulnerability {
            display: inline-flex;
            align-items: center;
            margin-right: 15px;
            font-size: 14px;
        }
        .vuln-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
            margin-left: 5px;
        }
        .vuln-critical {
            background-color: #d73a49;
            color: #ffffff;
        }
        .vuln-high {
            background-color: #f66a0a;
            color: #ffffff;
        }
        .vuln-medium {
            background-color: #ffd33d;
            color: #24292e;
        }
        .vuln-low {
            background-color: #6a737d;
            color: #ffffff;
        }
        .links {
            margin-top: 20px;
            padding: 15px;
            background-color: #f6f8fa;
            border-radius: 6px;
        }
        .links a {
            color: #0366d6;
            text-decoration: none;
            margin-right: 15px;
        }
        .links a:hover {
            text-decoration: underline;
        }
        .footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
            text-align: center;
            color: #586069;
            font-size: 12px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e1e4e8;
        }
        th {
            background-color: #f6f8fa;
            font-weight: 600;
            font-size: 12px;
            color: #586069;
            text-transform: uppercase;
        }
        .progress-bar {
            width: 100%;
            height: 24px;
            background-color: #e1e4e8;
            border-radius: 12px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #34d058 0%, #28a745 100%);
            transition: width 0.3s ease;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .status-on-track {
            background-color: #28a745;
            color: #ffffff;
        }
        .status-needs-attention {
            background-color: #ffd33d;
            color: #24292e;
        }
        .status-critical {
            background-color: #d73a49;
            color: #ffffff;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Konveyor Repository Health Report</h1>
            <p>Weekly report for {{.MaintainerName}} ‚Ä¢ Week ending {{.WeekEnding}}</p>
        </div>

        {{if .GoalsProgress}}
        <div class="section">
            <h2 class="section-title">Team Goals Progress</h2>
            <p style="color: #586069; font-size: 14px; margin-bottom: 20px;">
                Tracking progress across all {{.GoalsProgress.TotalReposChecked}} repositories
            </p>

            <!-- Goal 1: 30-Day Activity Rule -->
            <div style="margin-bottom: 25px; padding: 15px; background: #ffffff; border-radius: 6px; border: 1px solid #e1e4e8;">
                <h3 style="font-size: 15px; margin: 0 0 10px 0; color: #24292e;">
                    1. 30-Day Activity Rule
                    <span class="status-badge status-{{.GoalsProgress.ThirtyDayActivity.Status}}">
                        {{.GoalsProgress.ThirtyDayActivity.Status}}
                    </span>
                </h3>
                <p style="font-size: 13px; color: #586069; margin-bottom: 10px;">
                    Goal: No open issue/PR should go >30 days without maintainer comment
                </p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{printf "%.1f" .GoalsProgress.ThirtyDayActivity.ComplianceRate}}%"></div>
                </div>
                <div style="margin-top: 8px; font-size: 14px; color: #24292e;">
                    <strong>{{printf "%.1f" .GoalsProgress.ThirtyDayActivity.ComplianceRate}}%</strong> compliant
                    ({{.GoalsProgress.ThirtyDayActivity.ItemsOver30Days}} of {{.GoalsProgress.ThirtyDayActivity.TotalOpenItems}} items need attention)
                </div>
                {{if .GoalsProgress.ThirtyDayActivity.WorstOffenders}}
                <details style="margin-top: 10px;">
                    <summary style="cursor: pointer; color: #0366d6; font-size: 13px;">Top {{len .GoalsProgress.ThirtyDayActivity.WorstOffenders}} worst offenders ({{.GoalsProgress.ThirtyDayActivity.ItemsOver30Days}} total)</summary>
                    <ul style="margin-top: 10px; padding-left: 20px; font-size: 13px;">
                        {{range .GoalsProgress.ThirtyDayActivity.WorstOffenders}}
                        <li style="margin-bottom: 5px;">
                            <a href="{{.URL}}" style="color: #0366d6; text-decoration: none;">{{.Org}}/{{.Repo}} #{{.Number}}</a> - {{.DaysSinceUpdate}} days
                        </li>
                        {{end}}
                    </ul>
                    {{if gt .GoalsProgress.ThirtyDayActivity.ItemsOver30Days (len .GoalsProgress.ThirtyDayActivity.WorstOffenders)}}
                    <p style="margin-top: 10px; font-style: italic; color: #586069; font-size: 13px;">
                        <a href="https://github.com/issues?q=org%3Akonveyor+is%3Aopen+sort%3Aupdated-asc" style="color: #0366d6; text-decoration: none;">View all {{.GoalsProgress.ThirtyDayActivity.ItemsOver30Days}} stale items on GitHub ‚Üí</a>
                    </p>
                    {{end}}
                </details>
                {{end}}
            </div>

            <!-- Goal 2: Backlog Cleanup -->
            <div style="margin-bottom: 25px; padding: 15px; background: #ffffff; border-radius: 6px; border: 1px solid #e1e4e8;">
                <h3 style="font-size: 15px; margin: 0 0 10px 0; color: #24292e;">
                    2. Backlog Cleanup (90+ days)
                    <span class="status-badge status-{{.GoalsProgress.BacklogCleanup.Status}}">
                        {{.GoalsProgress.BacklogCleanup.Status}}
                    </span>
                </h3>
                <p style="font-size: 13px; color: #586069; margin-bottom: 10px;">
                    Goal: Reduce stale backlog by 20% over 4 weeks (baseline: {{.GoalsProgress.BacklogCleanup.Baseline}} on {{.GoalsProgress.BacklogCleanup.BaselineDate}})
                </p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{if lt .GoalsProgress.BacklogCleanup.ReductionPercent 0.0}}0{{else if gt .GoalsProgress.BacklogCleanup.ReductionPercent 100.0}}100{{else}}{{printf "%.1f" .GoalsProgress.BacklogCleanup.ReductionPercent}}{{end}}%"></div>
                </div>
                <div style="margin-top: 8px; font-size: 14px; color: #24292e;">
                    {{if lt .GoalsProgress.BacklogCleanup.ItemsReduced 0}}
                    <strong style="color: #d73a49;">{{printf "%.1f" (absFloat .GoalsProgress.BacklogCleanup.ReductionPercent)}}%</strong> increase ({{abs .GoalsProgress.BacklogCleanup.ItemsReduced}} items added)
                    {{else}}
                    <strong>{{printf "%.1f" .GoalsProgress.BacklogCleanup.ReductionPercent}}%</strong> reduction achieved ({{.GoalsProgress.BacklogCleanup.ItemsReduced}} items reduced)
                    {{end}}
                </div>
                <div style="margin-top: 5px; font-size: 12px; color: #586069;">
                    Current: {{.GoalsProgress.BacklogCleanup.CurrentBacklog}} items ‚Ä¢ {{.GoalsProgress.BacklogCleanup.TimeRemaining}}
                </div>
            </div>

            <!-- Goal 3: Triage Speed -->
            <div style="margin-bottom: 25px; padding: 15px; background: #ffffff; border-radius: 6px; border: 1px solid #e1e4e8;">
                <h3 style="font-size: 15px; margin: 0 0 10px 0; color: #24292e;">
                    3. Triage Speed (72 hours)
                    <span class="status-badge status-{{.GoalsProgress.TriageSpeed.Status}}">
                        {{.GoalsProgress.TriageSpeed.Status}}
                    </span>
                </h3>
                <p style="font-size: 13px; color: #586069; margin-bottom: 10px;">
                    Goal: 100% of new issues triaged (labeled + assigned) within 72 hours
                </p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{printf "%.1f" .GoalsProgress.TriageSpeed.TriageRate}}%"></div>
                </div>
                <div style="margin-top: 8px; font-size: 14px; color: #24292e;">
                    <strong>{{printf "%.1f" .GoalsProgress.TriageSpeed.TriageRate}}%</strong> triaged
                    ({{.GoalsProgress.TriageSpeed.TriagedIssues}} of {{.GoalsProgress.TriageSpeed.NewIssuesLast72h}} new issues)
                </div>
                {{if .GoalsProgress.TriageSpeed.UntriagedList}}
                <details style="margin-top: 10px;">
                    <summary style="cursor: pointer; color: #0366d6; font-size: 13px;">Untriaged issues ({{len .GoalsProgress.TriageSpeed.UntriagedList}})</summary>
                    <ul style="margin-top: 10px; padding-left: 20px; font-size: 13px;">
                        {{range $index, $issue := .GoalsProgress.TriageSpeed.UntriagedList}}
                        {{if lt $index 10}}
                        <li style="margin-bottom: 5px;">
                            <a href="{{$issue.URL}}" style="color: #0366d6; text-decoration: none;">{{$issue.Org}}/{{$issue.Repo}} #{{$issue.Number}}</a> - {{formatHours $issue.HoursOpen}}
                            {{if and $issue.MissingLabel $issue.MissingAssignee}}<span style="color: #d73a49;">(needs triage)</span>{{else if $issue.MissingLabel}}<span style="color: #d73a49;">(needs label)</span>{{else if $issue.MissingAssignee}}<span style="color: #d73a49;">(needs assignee)</span>{{end}}
                        </li>
                        {{end}}
                        {{end}}
                        {{if gt (len .GoalsProgress.TriageSpeed.UntriagedList) 10}}
                        <li style="margin-top: 10px; font-style: italic; color: #586069;">
                            <a href="https://github.com/search?q=org%3Akonveyor+is%3Aissue+is%3Aopen+no%3Alabel+no%3Aassignee" style="color: #0366d6; text-decoration: none;">View all {{len .GoalsProgress.TriageSpeed.UntriagedList}} untriaged issues on GitHub ‚Üí</a>
                        </li>
                        {{end}}
                    </ul>
                </details>
                {{end}}
            </div>

            <!-- Goal 4: Ownership Files -->
            <div style="margin-bottom: 25px; padding: 15px; background: #ffffff; border-radius: 6px; border: 1px solid #e1e4e8;">
                <h3 style="font-size: 15px; margin: 0 0 10px 0; color: #24292e;">
                    4. Ownership File Updates
                    <span class="status-badge status-{{.GoalsProgress.OwnershipUpdates.Status}}">
                        {{.GoalsProgress.OwnershipUpdates.Status}}
                    </span>
                </h3>
                <p style="font-size: 13px; color: #586069; margin-bottom: 10px;">
                    Goal: All repositories have OWNERS and README files
                </p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{printf "%.1f" .GoalsProgress.OwnershipUpdates.ComplianceRate}}%"></div>
                </div>
                <div style="margin-top: 8px; font-size: 14px; color: #24292e;">
                    <strong>{{printf "%.1f" .GoalsProgress.OwnershipUpdates.ComplianceRate}}%</strong> compliant
                    ({{.GoalsProgress.OwnershipUpdates.ReposWithFiles}} of {{.GoalsProgress.OwnershipUpdates.TotalRepos}} repos)
                </div>
                {{if .GoalsProgress.OwnershipUpdates.ReposNeedingAttention}}
                <details style="margin-top: 10px;">
                    <summary style="cursor: pointer; color: #0366d6; font-size: 13px;">Repos needing files ({{len .GoalsProgress.OwnershipUpdates.ReposNeedingAttention}})</summary>
                    <ul style="margin-top: 10px; padding-left: 20px; font-size: 13px;">
                        {{range .GoalsProgress.OwnershipUpdates.ReposNeedingAttention}}
                        <li style="margin-bottom: 5px;">
                            <a href="{{.URL}}" style="color: #0366d6; text-decoration: none;">{{.Org}}/{{.Repo}}</a>
                            {{if not .HasOwners}}<span style="color: #d73a49;">(missing OWNERS)</span>{{end}}
                            {{if not .HasReadme}}<span style="color: #d73a49;">(missing README)</span>{{end}}
                        </li>
                        {{end}}
                    </ul>
                </details>
                {{end}}
            </div>

            <!-- Per-Repository Breakdown -->
            {{if .GoalsProgress.PerRepoMetrics}}
            <div style="margin-top: 30px; border-top: 2px solid #e1e4e8; padding-top: 20px;">
                <h3 style="font-size: 16px; margin: 0 0 15px 0; color: #24292e;">
                    Repository Breakdown
                </h3>
                <details open>
                    <summary style="cursor: pointer; color: #0366d6; margin-bottom: 15px; font-size: 13px;">
                        Per-repository metrics ({{len .GoalsProgress.PerRepoMetrics}} repos)
                    </summary>
                    <table style="width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 10px;">
                        <thead>
                            <tr style="background: #f6f8fa; border-bottom: 2px solid #d1d5da;">
                                <th style="padding: 8px; text-align: left;">Repository</th>
                                <th style="padding: 8px; text-align: center;">Status</th>
                                <th style="padding: 8px; text-align: center;">30-Day</th>
                                <th style="padding: 8px; text-align: center;">Backlog</th>
                                <th style="padding: 8px; text-align: center;">Triage</th>
                                <th style="padding: 8px; text-align: center;">Files</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range .GoalsProgress.PerRepoMetrics}}
                            <tr style="border-bottom: 1px solid #e1e4e8;">
                                <td style="padding: 8px;">
                                    <a href="https://github.com/{{.Org}}/{{.Repo}}" style="color: #0366d6; text-decoration: none;">{{.Org}}/{{.Repo}}</a>
                                </td>
                                <td style="padding: 8px; text-align: center;">
                                    <span class="status-badge status-{{.OverallStatus}}" style="font-size: 10px; padding: 2px 6px;">
                                        {{.OverallStatus}}
                                    </span>
                                </td>
                                <td style="padding: 8px; text-align: center;">
                                    {{printf "%.0f" .ActivityCompliance}}%
                                    {{if gt .ItemsOver30Days 0}}
                                    <span style="color: #d73a49;">({{.ItemsOver30Days}})</span>
                                    {{end}}
                                </td>
                                <td style="padding: 8px; text-align: center;">
                                    {{.BacklogCount}}
                                </td>
                                <td style="padding: 8px; text-align: center;">
                                    {{if gt .NewIssuesLast72h 0}}
                                    {{printf "%.0f" .TriageRate}}%
                                    {{if gt .UntriagedCount 0}}
                                    <span style="color: #d73a49;">({{.UntriagedCount}})</span>
                                    {{end}}
                                    {{else}}
                                    -
                                    {{end}}
                                </td>
                                <td style="padding: 8px; text-align: center;">
                                    {{if and .HasOwners .HasReadme}}‚úì{{else}}
                                    {{if not .HasOwners}}<span style="color: #d73a49;">‚úóO</span>{{end}}
                                    {{if not .HasReadme}}<span style="color: #d73a49;">‚úóR</span>{{end}}
                                    {{end}}
                                </td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                    <p style="font-size: 11px; color: #586069; margin-top: 10px; font-style: italic;">
                        ‚úóO = Missing OWNERS, ‚úóR = Missing README. Numbers in red show items needing attention.
                    </p>
                </details>
            </div>
            {{end}}

            <p style="font-size: 12px; color: #586069; margin-top: 15px; text-align: center;">
                Data fetched: {{.GoalsProgress.FetchedAt.Format "2006-01-02 15:04 MST"}}
            </p>
        </div>
        {{end}}


        {{if gt .TotalRepos 1}}
        <div class="section">
            <h2 class="section-title">Executive Summary</h2>
            <div class="metric-grid">
                <div class="metric">
                    <div class="metric-label">Repositories</div>
                    <div class="metric-value">{{.TotalRepos}}</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Total Stale Items</div>
                    <div class="metric-value">{{.TotalStale}}</div>
                </div>
                <div class="metric">
                    <div class="metric-label">New Contributors</div>
                    <div class="metric-value">{{.TotalNewContributors}}</div>
                </div>
            </div>
        </div>
        {{end}}

        {{range .Repos}}
        <div class="section" id="repo-{{.Org}}-{{.Repo}}" style="margin-top: 40px; padding-top: 30px; border-top: 3px solid #e1e4e8;">
            <h2 class="repo-title">{{.Org}}/{{.Repo}}</h2>

            <!-- Action Items -->
            {{if .ActionItems}}
            {{if gt .ActionItems.TotalItems 0}}
            <div style="margin-bottom: 25px; padding: 15px; background: #fff5f5; border-radius: 6px; border-left: 4px solid #d73a49;">
                <h3 style="font-size: 16px; margin: 0 0 10px 0; color: #d73a49;">
                    ‚ö†Ô∏è Action Items Requiring Attention
                </h3>
                <p style="color: #586069; font-size: 13px; margin-bottom: 5px;">
                    {{.ActionItems.TotalItems}} item{{if ne .ActionItems.TotalItems 1}}s{{end}} need your immediate attention
                </p>
                <p style="color: #586069; font-size: 11px; margin-bottom: 15px; font-style: italic;">
                    Priority: üî¥ Urgent (>30 days) ‚Ä¢ üü° Needs attention (7-30 days) ‚Ä¢ ‚ö™ Recent (<7 days)
                </p>

                {{if .ActionItems.UnrespondedIssues}}
                <div style="margin-bottom: 15px;">
                    <strong style="color: #d73a49; font-size: 14px;">Issues Without Response ({{len .ActionItems.UnrespondedIssues}})</strong>
                    <table style="width: 100%; font-size: 13px; border-collapse: collapse; margin-top: 8px;">
                        <thead>
                            <tr style="border-bottom: 2px solid #e1e4e8;">
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Issue</th>
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Author</th>
                                <th style="text-align: center; padding: 6px; color: #586069; font-weight: 600;">Age</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range $index, $issue := .ActionItems.UnrespondedIssues}}
                            {{if lt $index 10}}
                            <tr style="border-bottom: 1px solid #e1e4e8;">
                                <td style="padding: 6px;">
                                    <a href="{{$issue.URL}}" style="color: #0366d6; text-decoration: none; font-weight: 500;">
                                        #{{$issue.Number}}
                                    </a>
                                    <br>
                                    <span style="color: #586069; font-size: 12px;">{{$issue.Title}}</span>
                                </td>
                                <td style="padding: 6px;">
                                    <span style="color: #586069;">@{{$issue.Author}}</span>
                                </td>
                                <td style="padding: 6px; text-align: center;">
                                    <span style="font-size: 14px;">{{urgencyIndicator $issue.DaysSince}}</span>
                                    <span style="color: {{urgencyColor $issue.DaysSince}}; font-weight: 600;">{{$issue.DaysSince}}d</span>
                                </td>
                            </tr>
                            {{end}}
                            {{end}}
                        </tbody>
                    </table>
                    {{if gt (len .ActionItems.UnrespondedIssues) 10}}
                    <p style="margin-top: 10px; font-style: italic; color: #586069; font-size: 12px;">
                        <a href="https://github.com/search?q=org%3Akonveyor+is%3Aissue+is%3Aopen+no%3Acomments" style="color: #0366d6; text-decoration: none;">View all {{len .ActionItems.UnrespondedIssues}} unresponded issues on GitHub ‚Üí</a>
                    </p>
                    {{end}}
                </div>
                {{end}}

                {{if .ActionItems.UnreviewedPRs}}
                <div style="margin-bottom: 15px;">
                    <strong style="color: #d97706; font-size: 14px;">Pull Requests Awaiting Review ({{len .ActionItems.UnreviewedPRs}})</strong>
                    <table style="width: 100%; font-size: 13px; border-collapse: collapse; margin-top: 8px;">
                        <thead>
                            <tr style="border-bottom: 2px solid #e1e4e8;">
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Pull Request</th>
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Author</th>
                                <th style="text-align: center; padding: 6px; color: #586069; font-weight: 600;">Age</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range $index, $pr := .ActionItems.UnreviewedPRs}}
                            {{if lt $index 10}}
                            <tr style="border-bottom: 1px solid #e1e4e8;">
                                <td style="padding: 6px;">
                                    <a href="{{$pr.URL}}" style="color: #0366d6; text-decoration: none; font-weight: 500;">
                                        #{{$pr.Number}}
                                    </a>
                                    <br>
                                    <span style="color: #586069; font-size: 12px;">{{$pr.Title}}</span>
                                </td>
                                <td style="padding: 6px;">
                                    <span style="color: #586069;">@{{$pr.Author}}</span>
                                </td>
                                <td style="padding: 6px; text-align: center;">
                                    <span style="font-size: 14px;">{{urgencyIndicator $pr.DaysSince}}</span>
                                    <span style="color: {{urgencyColor $pr.DaysSince}}; font-weight: 600;">{{$pr.DaysSince}}d</span>
                                </td>
                            </tr>
                            {{end}}
                            {{end}}
                        </tbody>
                    </table>
                    {{if gt (len .ActionItems.UnreviewedPRs) 10}}
                    <p style="margin-top: 10px; font-style: italic; color: #586069; font-size: 12px;">
                        <a href="https://github.com/search?q=org%3Akonveyor+is%3Apr+is%3Aopen+review%3Anone" style="color: #0366d6; text-decoration: none;">View all {{len .ActionItems.UnreviewedPRs}} unreviewed PRs on GitHub ‚Üí</a>
                    </p>
                    {{end}}
                </div>
                {{end}}

                {{if .ActionItems.FailingBranches}}
                <div style="margin-bottom: 15px;">
                    <strong style="color: #d73a49; font-size: 14px;">‚ùå Failing Default Branch ({{len .ActionItems.FailingBranches}})</strong>
                    <table style="width: 100%; font-size: 13px; border-collapse: collapse; margin-top: 8px;">
                        <thead>
                            <tr style="border-bottom: 2px solid #e1e4e8;">
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Branch</th>
                                <th style="text-align: center; padding: 6px; color: #586069; font-weight: 600;">Status</th>
                                <th style="text-align: center; padding: 6px; color: #586069; font-weight: 600;">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range .ActionItems.FailingBranches}}
                            <tr style="border-bottom: 1px solid #e1e4e8;">
                                <td style="padding: 6px;">
                                    <code style="background: #f6f8fa; padding: 2px 6px; border-radius: 3px; font-size: 12px;">{{.Branch}}</code>
                                </td>
                                <td style="padding: 6px; text-align: center;">
                                    <span style="color: #d73a49; font-weight: 600; text-transform: uppercase;">{{.Status}}</span>
                                </td>
                                <td style="padding: 6px; text-align: center;">
                                    <a href="{{.ChecksURL}}" style="color: #0366d6; text-decoration: none; font-size: 12px;">View checks</a>
                                </td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>
                {{end}}

                {{if .ActionItems.ApprovedPRsReadyToMerge}}
                <div style="margin-bottom: 15px;">
                    <strong style="color: #22863a; font-size: 14px;">‚úÖ Approved PRs Ready to Merge ({{len .ActionItems.ApprovedPRsReadyToMerge}})</strong>
                    <table style="width: 100%; font-size: 13px; border-collapse: collapse; margin-top: 8px;">
                        <thead>
                            <tr style="border-bottom: 2px solid #e1e4e8;">
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Pull Request</th>
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Author</th>
                                <th style="text-align: center; padding: 6px; color: #586069; font-weight: 600;">Approved</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range .ActionItems.ApprovedPRsReadyToMerge}}
                            <tr style="border-bottom: 1px solid #e1e4e8;">
                                <td style="padding: 6px;">
                                    <a href="{{.URL}}" style="color: #0366d6; text-decoration: none; font-weight: 500;">
                                        #{{.Number}}
                                    </a>
                                    <br>
                                    <span style="color: #586069; font-size: 12px;">{{.Title}}</span>
                                </td>
                                <td style="padding: 6px;">
                                    <span style="color: #586069;">@{{.Author}}</span>
                                </td>
                                <td style="padding: 6px; text-align: center;">
                                    <span style="color: #22863a; font-weight: 600;">{{.DaysSince}}d ago ({{.ApprovalCount}} ‚úì)</span>
                                </td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>
                {{end}}

                {{if .ActionItems.ExternalContributorPRs}}
                <div style="margin-bottom: 15px;">
                    <strong style="color: #6f42c1; font-size: 14px;">üëã External/First-Time Contributor PRs ({{len .ActionItems.ExternalContributorPRs}})</strong>
                    <table style="width: 100%; font-size: 13px; border-collapse: collapse; margin-top: 8px;">
                        <thead>
                            <tr style="border-bottom: 2px solid #e1e4e8;">
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Pull Request</th>
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Author</th>
                                <th style="text-align: center; padding: 6px; color: #586069; font-weight: 600;">Waiting</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range .ActionItems.ExternalContributorPRs}}
                            <tr style="border-bottom: 1px solid #e1e4e8;">
                                <td style="padding: 6px;">
                                    <a href="{{.URL}}" style="color: #0366d6; text-decoration: none; font-weight: 500;">
                                        #{{.Number}}
                                    </a>
                                    <br>
                                    <span style="color: #586069; font-size: 12px;">{{.Title}}</span>
                                </td>
                                <td style="padding: 6px;">
                                    <span style="color: #586069;">@{{.Author}}</span>
                                    {{if .IsFirstTime}}<br><span style="background: #6f42c1; color: white; padding: 2px 6px; border-radius: 3px; font-size: 11px;">First-time</span>{{end}}
                                </td>
                                <td style="padding: 6px; text-align: center;">
                                    <span style="color: #6f42c1; font-weight: 600;">{{.DaysWaiting}}d</span>
                                </td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>
                {{end}}

                {{if .ActionItems.PRsAwaitingAuthorResponse}}
                <div style="margin-bottom: 15px;">
                    <strong style="color: #e36209; font-size: 14px;">‚è≥ PRs Awaiting Author Response ({{len .ActionItems.PRsAwaitingAuthorResponse}})</strong>
                    <table style="width: 100%; font-size: 13px; border-collapse: collapse; margin-top: 8px;">
                        <thead>
                            <tr style="border-bottom: 2px solid #e1e4e8;">
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Pull Request</th>
                                <th style="text-align: left; padding: 6px; color: #586069; font-weight: 600;">Author</th>
                                <th style="text-align: center; padding: 6px; color: #586069; font-weight: 600;">Waiting</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range .ActionItems.PRsAwaitingAuthorResponse}}
                            <tr style="border-bottom: 1px solid #e1e4e8;">
                                <td style="padding: 6px;">
                                    <a href="{{.URL}}" style="color: #0366d6; text-decoration: none; font-weight: 500;">
                                        #{{.Number}}
                                    </a>
                                    <br>
                                    <span style="color: #586069; font-size: 12px;">{{.Title}}</span>
                                    <br>
                                    <span style="color: #e36209; font-size: 11px;">Changes requested by @{{.Reviewer}}</span>
                                </td>
                                <td style="padding: 6px;">
                                    <span style="color: #586069;">@{{.Author}}</span>
                                </td>
                                <td style="padding: 6px; text-align: center;">
                                    <span style="color: #e36209; font-weight: 600;">{{.DaysSinceRequest}}d</span>
                                </td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>
                {{end}}
            </div>
            {{end}}
            {{end}}

            <!-- Stale Issues & PRs -->
            <h3 class="section-title">
                Stale Issues & PRs
                <a href="{{.StaleURL}}" style="font-size: 14px; font-weight: normal; color: #0366d6; text-decoration: none; margin-left: 10px;">‚Üí View Dashboard</a>
            </h3>
            <div class="metric-grid">
                <div class="metric">
                    <div class="metric-label">Total Stale</div>
                    <div class="metric-value">{{.CurrentStale.TotalStale}}</div>
                    <div class="metric-trend {{if eq .StaleTrend.Direction "up"}}trend-up{{else if eq .StaleTrend.Direction "down"}}trend-down{{else}}trend-same{{end}}">
                        {{if eq .StaleTrend.Direction "up"}}‚Üë{{else if eq .StaleTrend.Direction "down"}}‚Üì{{else}}‚Üí{{end}}
                        {{if ne .StaleTrend.Direction "same"}}{{.StaleTrend.Absolute}} ({{printf "%.1f" .StaleTrend.Percent}}%){{else}}No change{{end}}
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-label">Stale Issues</div>
                    <div class="metric-value">{{.CurrentStale.StaleIssues}}</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Stale PRs</div>
                    <div class="metric-value">{{.CurrentStale.StalePRs}}</div>
                </div>
            </div>

            {{if .StaleItems}}
            <div class="stale-list">
                {{$org := .Org}}
                {{$repo := .Repo}}
                {{range .StaleItems}}
                <div class="stale-item">
                    <div class="stale-item-title">
                        <a href="https://github.com/{{$org}}/{{$repo}}/{{if eq .Type "issue"}}issues{{else}}pull{{end}}/{{.Number}}" style="color: #0366d6; text-decoration: none;">
                            {{if eq .Type "issue"}}Issue{{else}}PR{{end}} #{{.Number}}: {{.Title}}
                        </a>
                    </div>
                    <div class="stale-item-meta">
                        By @{{.Author}} ‚Ä¢ Last updated: {{.UpdatedAt}}
                    </div>
                </div>
                {{end}}
            </div>
            {{end}}

            <!-- Community Health -->
            <h3 class="section-title">
                Community Health
                <a href="{{.CommunityHealthURL}}" style="font-size: 14px; font-weight: normal; color: #0366d6; text-decoration: none; margin-left: 10px;">‚Üí View Dashboard</a>
            </h3>
            <div class="metric-grid">
                <div class="metric">
                    <div class="metric-label">Contributors (90d)</div>
                    <div class="metric-value">{{.CurrentHealth.Contributors}}</div>
                </div>
                <div class="metric">
                    <div class="metric-label">New Contributors (30d)</div>
                    <div class="metric-value">{{.CurrentHealth.NewContributors}}</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Avg Issue Response</div>
                    <div class="metric-value">{{if gt .CurrentHealth.AvgIssueResponseMs 0.0}}{{formatDuration .CurrentHealth.AvgIssueResponseMs}}{{else}}N/A{{end}}</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Avg PR Response</div>
                    <div class="metric-value">{{if gt .CurrentHealth.AvgPRResponseMs 0.0}}{{formatDuration .CurrentHealth.AvgPRResponseMs}}{{else}}N/A{{end}}</div>
                </div>
                <div class="metric">
                    <div class="metric-label">PR Merge Rate</div>
                    <div class="metric-value">{{printf "%.0f" .CurrentHealth.PRMergeRate}}%</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Open Issues</div>
                    <div class="metric-value">{{.CurrentHealth.OpenIssues}}</div>
                </div>
            </div>

            {{if .NewContributors}}
            <div class="contributors-list">
                <strong>New Contributors This Week:</strong><br>
                {{range .NewContributors}}
                <span class="contributor">@{{.Username}}</span>
                {{end}}
            </div>
            {{end}}

            <!-- Security & Coverage - only show if data exists -->
            {{if or .CurrentHealth.Vulnerabilities .CurrentHealth.Coverage}}
            <h3 class="section-title">Security & Coverage</h3>
            {{if .CurrentHealth.Vulnerabilities}}
            <div style="margin-top: 10px;">
                <strong>Snyk Vulnerabilities:</strong><br>
                <div style="margin-top: 10px;">
                    <span class="vulnerability">
                        Critical: <span class="vuln-badge vuln-critical">{{.CurrentHealth.Vulnerabilities.Critical}}</span>
                    </span>
                    <span class="vulnerability">
                        High: <span class="vuln-badge vuln-high">{{.CurrentHealth.Vulnerabilities.High}}</span>
                    </span>
                    <span class="vulnerability">
                        Medium: <span class="vuln-badge vuln-medium">{{.CurrentHealth.Vulnerabilities.Medium}}</span>
                    </span>
                    <span class="vulnerability">
                        Low: <span class="vuln-badge vuln-low">{{.CurrentHealth.Vulnerabilities.Low}}</span>
                    </span>
                </div>
            </div>
            {{end}}

            {{if .CurrentHealth.Coverage}}
            <div style="margin-top: 15px;">
                <strong>Code Coverage:</strong> {{printf "%.1f" (derefFloat .CurrentHealth.Coverage)}}%
            </div>
            {{end}}
            {{end}}

            <div class="links">
                <strong>Quick Links:</strong><br>
                <a href="{{.DashboardURL}}">Repository</a>
                <a href="{{.StaleURL}}">Stale Items</a>
                <a href="{{.CommunityHealthURL}}">Community Insights</a>
            </div>
        </div>
        {{end}}

        <div class="footer">
            <p>Generated on {{.GeneratedAt.Format "2006-01-02 15:04:05 MST"}}</p>
            <p>Generated with <a href="https://github.com/konveyor/release-tools">Konveyor Release Tools</a></p>
        </div>
    </div>
</body>
</html>
