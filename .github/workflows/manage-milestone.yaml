name: Manage Milestone

on:
  workflow_dispatch:
    inputs:
      title:
        description: Title of the milestone
        required: true
        type: string
      state:
        description: The state (open|closed) of the milestone
        required: false
        default: "open"
        type: string
      description:
        description: Description of the milestone
        required: false
        default: ""
        type: string
      due:
        description: Due date (DateOnly format https://pkg.go.dev/time#pkg-constants)
        required: false
        default: ""
        type: string

jobs:
  sync-labels:
    name: Synchronize Labels
    runs-on: ubuntu-latest
    strategy:
      matrix:
        repos:
          - org: konveyor
            repo: release-tools
      fail-fast: true
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: Manage Milestone
      uses: ./cmd/milestones
      with:
        github_token: ${{ secrets.GH_TOKEN }}
        organization: ${{ matrix.repos.org }}
        repository: ${{ matrix.repos.repo }}
        title: ${{ inputs.title }}
        state: ${{ inputs.state }}
        description: ${{ inputs.description }}
        due: ${{ inputs.due }}
